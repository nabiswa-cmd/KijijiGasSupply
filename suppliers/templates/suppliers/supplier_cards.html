{% load static %}

{% for supplier in suppliers %}
<div class="col-12 col-md-6 col-lg-4 supplier-card">
    <div class="card p-3">

        {% if supplier.image %}
            <img src="{{ supplier.image.url }}" alt="{{ supplier.name }}"
                 class="img-fluid rounded mb-2"
                 style="height: 200px; object-fit: cover; width: 100%;">
        {% else %}
            <img src="{{ MEDIA_URL }}default.png" alt="Default"
                 class="img-fluid rounded mb-2"
                 style="height: 200px; object-fit: cover; width: 100%;">
        {% endif %}

        <h5 class="card-title" style="color: #0D47A1;">{{ supplier.name }}</h5>
        <p class="card-text mb-1">Location: {{ supplier.location }}</p>
        <p class="card-text mb-1">Price: KES {{ supplier.refill_price }}</p>

        <p class="card-text mb-1">
            Rating:
            {% for i in "12345" %}
                {% if forloop.counter <= supplier.rating|default:0 %}
                    <span style="color:#FBC02D;">&#9733;</span>
                {% else %}
                    <span style="color:#ccc;">&#9733;</span>
                {% endif %}
            {% endfor %}
        </p>

        <a href="{% url 'supplier_profile' supplier.id %}" class="btn btn-primary mt-2">View Profile</a>
        <a href="{% url 'place_order' supplier.id %}" class="btn btn-warning mt-2">Place Order</a>
    </div>
</div>
{% empty %}
<p>No suppliers match your search criteria.</p>
{% endfor %}
