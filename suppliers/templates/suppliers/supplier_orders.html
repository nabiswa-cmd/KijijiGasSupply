{% extends 'main.html' %}
{% block content %}

<h2>My Orders</h2>

<table class="table table-striped">
    <thead>
        <tr>
            <th>ID</th>
            <th>Customer</th>
            <th>Location</th>
            <th>Qty</th>
            <th>Status</th>
            <th>Action</th>
            <th>Remove order</th>
        </tr>
    </thead>

    <tbody>
        {% for order in orders %}
        <tr>
            <td>{{ order.id }}</td>
            <td>{{ order.customer_name }}</td>
            <td>{{ order.customer_location }}</td>
            <td>{{ order.quantity }}</td>

            <!-- FIXED STATUS DISPLAY -->
            <td>
                {% if order.status == "Pending" %}
                    <span class="badge bg-warning text-dark">Pending</span>

                {% elif order.status == "on the Way" %}
                    <span class="badge bg-info">On the Way</span>

                {% elif order.status == "Delivered" %}
                    <span class="badge bg-success">Delivered</span>

                {% elif order.status == "Cancelled" %}
                    <span class="badge bg-danger">Cancelled</span>

                {% else %}
                    <span class="badge bg-secondary">{{ order.status }}</span>
                {% endif %}
            </td>

            <!-- ACTION BUTTONS -->
            <td>
            
                {% if order.status == "Pending" %}
                   
                    <a href="{% url 'mark_on_the_way' order.id %}" class="btn btn-sm btn-info">Start Delivery</a>

                {% elif order.status == "on the Way" %}
                    <a href="{% url 'mark_delivered' order.id %}" class="btn btn-sm btn-success">Mark Delivered</a>

                {% elif order.status == "Delivered" %}
                    Delivered

                {% elif order.status == "Cancelled" %}
                    Cancelled

                {% else %}
                    ---
                {% endif %}
                 <a href="{% url 'my_messages' order.id %}" class="btn btn-sm btn-danger">Send message</a>
            </td>
            <td>
                 <a href="{% url 'cancel_order1' order.id %}" class="btn btn-sm btn-danger"> Cancel Order made</a>
                
            </td>

        </tr>
        {% endfor %}
    </tbody>
</table>

{% endblock %}
