{% extends 'main.html' %}
{% block content %}

<style>
    .stat-card {
        border-radius: 12px;
        padding: 20px;
        background: #ffffff;
        box-shadow: 0 4px 8px rgba(0,0,0,0.08);
        transition: transform .2s ease;
    }
    .stat-card:hover {
        transform: translateY(-20px);
    }
    .stat-title {
        font-size: 15px;
        color: #666;
        margin-bottom: 5px;
        font-weight: 600;
    }
    .stat-value {
        font-size: 22px;
        font-weight: bold;
        color: #333;
    }

    .dashboard-actions .btn {
        margin-right: 10px;
    }

    /* Table styling */
    table th {
        background: #f0f2f5;
        font-weight: 600;
    }
</style>


<h2 class="mt-3">Welcome, {{ supplier.name }}</h2>

<!-- Stats -->
<div class="row mt-4">

    <div class="col-md-3 col-6 mb-3">
        <div class="stat-card">
            <div class="stat-title">Today's Sales</div>
            <div class="stat-value">{{ today_orders }}</div>
        </div>
    </div>

    <div class="col-md-3 col-6 mb-3">
        <div class="stat-card">
            <div class="stat-title">Pending Orders</div>
            <div class="stat-value text-warning">{{ pending }}</div>
        </div>
    </div>

    <div class="col-md-3 col-6 mb-3">
        <div class="stat-card">
            <div class="stat-title">Delivered</div>
            <div class="stat-value text-success">{{ delivered }}</div>
        </div>
    </div>

    <div class="col-md-3 col-6 mb-3">
        <div class="stat-card">
            <div class="stat-title">Earnings Today</div>
            <div class="stat-value text-primary">KES {{ earnings }}</div>
        </div>
    </div>

</div>

<!-- Buttons -->
<div class="mt-4 dashboard-actions">
    <a href="{% url 'supplier_orders' %}" class="btn btn-primary">Manage Orders</a>
    <a href="{% url 'edit_supplier_profile' %}" class="btn btn-warning">Edit Profile</a>
    <a href="{% url 'change_price' %}" class="btn btn-info">Change Gas Price</a>
</div>

<hr class="my-4">

<!-- Latest Orders -->
<h4 class="mb-3">Latest Orders</h4>

<div class="table-responsive">
    <table class="table table-hover table-bordered align-middle">
        <thead>
            <tr>
                <th>Order ID</th>
                <th>Customer</th>
                <th>Location</th>
                <th>Quantity</th>
                <th>Status</th>
                <th>Ordered At</th>
            </tr>
        </thead>
        <tbody>
            {% for order in latest_orders %}
            <tr>
                <td>{{ order.id }}</td>
                <td>{{ order.customer_name }}</td>
                <td>{{ order.customer_location }}</td>
                <td>{{ order.quantity }}</td>

                <!-- Status Badge -->
                <td>
                    {% if order.status == "Pending" %}
                        <span class="badge bg-warning text-dark">Pending</span>
                    {% elif order.status == "Delivered" %}
                        <span class="badge bg-success">Delivered</span>
                    {% else %}
                        <span class="badge bg-secondary">{{ order.status }}</span>
                    {% endif %}
                </td>

                <td>{{ order.created_at|date:"d M Y H:i" }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="6" class="text-center py-3">No orders yet.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}
